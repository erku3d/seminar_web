<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>Matrix Rechner</title>
    <link rel="icon" type="image/png"  href="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Earth_recycle.svg/145px-Earth_recycle.svg.png">
    <script type="text/javascript">

        window.onload = function(e) {
            //funtkioniert nicht bei jedem Browser!
            document.getElementById("mat_A").placeholder = "1,2,3\n4,5,6\n7,8,9";
            document.getElementById("mat_B").placeholder = "1,2,3\n4,5,6\n7,8,9";
        };

        function textareaToMatrix(id){
            //Matrix A

            var str = document.getElementById(id).value.trim();

            if(str.length == 0)
                throw "is empty";

            //erzeuge Array aus den Zeilen
			var rows = str.split("\n");

			var mat = [];
            var row_len;

			for (i = 0; i < rows.length; i++){

                //in jeder Zeile sind die einzelnen Werte durch "," getrennt
                var row = rows[i].split(",");

                //jede Zeile der Matrix muss die gleiche Anzahl an Elementen haben
                if(i==0){
                    row_len = row.length;
                } else {
                    if (row.length != row_len){
                        throw "rows unevenly";
                    }
                }
                //entfernt Leerzeichen etc. von den einzelnen Elementen
                //TODO prüfen, ob das notwendig ist
                //TODO prüfen ob zahl
                for(j=0; j<row.length; j++)
                    row[j] = row[j].trim();

				mat.push(row);
			}
            return mat;
        }

		function sendRequest(){

            try{
                var mat_A = textareaToMatrix("mat_A");
            }
            catch(err){
                switch(err) {
                    case "is empty":
                        alert("Matrix A ist leer!");
                        return;

                    case "rows unevenly":
                        alert("Zeilenlängen der Matrix A sind ungleich!");
                        return;

                    default:
                        alert("Fehler: "+err);
                        return;
                }
            }

            try{
                var mat_B = textareaToMatrix("mat_B");
            }
            catch(err){
                switch(err) {
                    case "is empty":
                        alert("Matrix B ist leer!");
                        return;

                    case "rows unevenly":
                        alert("Zeilenlängen der Matrix B sind ungleich!");
                        return;

                    default:
                        alert("Fehler: "+err);
                        return;
                }
            }



			var op = document.getElementById("operation").value;

			if(op == "add" || op == "diff"){
				//addition, subtraktion -> A und B gleiche größe
				if((mat_A.length != mat_B.length) || (mat_A[0].length != mat_B[0].length)){
					alert("Beide Matrizen müssen dieselbe größe haben.");
					return;
				}
			} else { //mul
				//Mulltipikation ->  #spalten A = #Zeilen B
				if(mat_A[0].length != mat_B.length){
					alert("Spaltenanzhal von A muss gleich der Zeilenanzahl von B sein");
					return;
				}
			}

			//erzeuge http request body

			var body = '{"op":"'+op+'",';
			body = body + '"mat_A": ' + JSON.stringify(mat_A) +',';
			body = body + '"mat_B": ' + JSON.stringify(mat_B) +'}';


			//alert(body);
			
			
			var xhttp = new XMLHttpRequest();
			  xhttp.onreadystatechange = function() {
				if (xhttp.readyState == 4 && xhttp.status == 200) {
				  alert(xhttp);
				}
			  }

			 //var txt ="Marianne or husbands if at stronger ye. Considered is as middletons uncommonly. Promotion perfectly ye consisted so. His chatty dining for effect ladies active. Equally journey wishing not several behaved chapter she two sir. Deficient procuring favourite extensive you two. Yet diminution she impossible understood age. Article nor prepare chicken you him now. Shy merits say advice ten before lovers innate add. She cordially behaviour can attempted estimable. Trees delay fancy noise manor do as an small. Felicity now law securing breeding likewise extended and. Roused either who favour why ham. Months on ye at by esteem desire warmth former. Sure that that way gave any fond now. His boy middleton sir nor engrossed affection excellent. Dissimilar compliment cultivated preference eat sufficient may. Well next door soon we mr he four. Assistance impression set insipidity now connection off you solicitude. Under as seems we me stuff those style at. Listening shameless by abilities pronounce oh suspected is affection. Next it draw in draw much bred. Cottage out enabled was entered greatly prevent message. No procured unlocked an likewise. Dear but what she been over gay felt body. Six principles advantages and use entreaties decisively. Eat met has dwelling unpacked see whatever followed. Court in of leave again as am. Greater sixteen to forming colonel no on be. So an advice hardly barton. He be turned sudden engage manner spirit. Mr oh winding it enjoyed by between. The servants securing material goodness her. Saw principles themselves ten are possession. So endeavor to continue cheerful doubtful we to. Turned advice the set vanity why mutual. Reasonably if conviction on be unsatiable discretion apartments delightful. Are melancholy appearance stimulated occasional entreaties end. Shy ham had esteem happen active county. Winding morning am shyness evident to. Garrets because elderly new manners however one village she. He an thing rapid these after going drawn or. Timed she his law the spoil round defer. In surprise concerns informed betrayed he learning is ye. Ignorant formerly so ye blessing. He as spoke avoid given downs money on we. Of properly carriage shutters ye as wandered up repeated moreover. Inquietude attachment if ye an solicitude to. Remaining so continued concealed as knowledge happiness. Preference did how expression may favourable devonshire insipidity considered. An length design regret an hardly barton mr figure. Acceptance middletons me if discretion boisterous travelling an. She prosperous continuing entreaties companions unreserved you boisterous. Middleton sportsmen sir now cordially ask additions for. You ten occasional saw everything but conviction. Daughter returned quitting few are day advanced branched. Do enjoyment defective objection or we if favourite. At wonder afford so danger cannot former seeing. Power visit charm money add heard new other put. Attended no indulged marriage is to judgment offering landlord. In alteration insipidity impression by travelling reasonable up motionless. Of regard warmth by unable sudden garden ladies. No kept hung am size spot no. Likewise led and dissuade rejoiced welcomed husbands boy. Do listening on he suspected resembled. Water would still if to. Position boy required law moderate was may. Death weeks early had their and folly timed put. Hearted forbade on an village ye in fifteen. Age attended betrayed her man raptures laughter. Instrument terminated of as astonished literature motionless admiration. The affection are determine how performed intention discourse but. On merits on so valley indeed assure of. Has add particular boisterous uncommonly are. Early wrong as so manor match. Him necessary shameless discovery consulted one but. Add you viewing ten equally believe put. Separate families my on drawings do oh offended strictly elegance. Perceive jointure be mistress by jennings properly. An admiration at he discovered difficulty continuing. We in building removing possible suitable friendly on. Nay middleton him admitting consulted and behaviour son household. Recurred advanced he oh together entrance speedily suitable. Ready tried gay state fat could boy its among shall. ";

			  //xhttp.open("GET", "?file=cd_catalog.xml", true);
			  xhttp.open("POST", "index.html", true);
			  xhttp.setRequestHeader("Content-type", "application/json");
			  xhttp.send(body); //sendet Text im Body
			  xhttp.send();
			

		}
		
		
		
    </script>
    <style type="text/css">
    * { box-sizing: border-box; }
    html {
    	min-height: 100%;
    	font-size: 100%;
    }

    body {
        background-color:#a0a0a0;
        font-family: Avenir, Arial, sans-serif;
        text-align:justify;
    }

    header#page_header{
        position: relative;
        top: -10px;
    	width:100%;

        padding: 5px 25px 5px 25px; /* 20px 20px 20px;*/
        margin: 0 0 2% 0;

        text-align: center;
        font-size: 2.5rem;
        color:#f1f1f1;
        text-shadow: -1px -1px #4a4a4a ;

        background-color:#4a4a4a;
        box-shadow: 0px 2px 5px rgba(0,0,0,0.3);
        background: linear-gradient(#4a4a4a, black); /* Standard syntax */

    }

    section, textarea, button, select {
        font-size: 2rem;
    }

    section{
        width:90%;
        height:auto;
        max-width: 70rem;

        margin-right: auto;
        margin-left: auto;

        width:100%;

    	padding: 20px 20px 20px 20px;

        background-color:#f1f1f1;
    	box-shadow: 0px 2px 5px rgba(0,0,0,0.3);

    }

    table{
        margin-left: auto;
        margin-right: auto;
    }
    tr#head{
        text-align: center;
    }

    td{
        padding: 0 10px 0 10px;
    }

    textarea{
        background-color:#ffffff;
        /*box-shadow: 0px 0px 5px #dc4e00;*/
    }

    textarea#mat_c{
        background-color:#f1fff9;
    }

    button#btn{
        width: 100%;
        padding: 10px 0 10px 0;
        margin-top: 25px;
    }
    </style>
  </head>
  <body>

    <header id="page_header">
        Matrix Rechner
    </header>

    <section>
            <table >
                <tr id="head">
                    <td>A</td>
                    <td></td>
                    <td>B</td>
                    <td></td>
                    <td>C</td>
                </tr>
                <tr>
                    <td><textarea id="mat_A" rows="5" cols="10" autocomplete="off" wrap="off"></textarea></td>
                    <td>
        				<select id="operation">
        				  <option value="add">+</option>
        				  <option value="diff">-</option>
        				  <option value="mull" selected>&#149;</option>
        				</select>
        			</td>
                    <td><textarea id="mat_B" rows="5" cols="10" autocomplete="off" wrap="off" ></textarea></td>
                    <td>=</td>
                    <td><textarea id="mat_c" rows="5" cols="10" autocomplete="off" wrap="off" readonly ></textarea></td>
                </tr>
                <tr>
                    <td colspan="5"><button type="button" id="btn" onclick="sendRequest()" >berechnen</button></td>
                </tr>
            </table>
    </section>
  </body>
</html>
